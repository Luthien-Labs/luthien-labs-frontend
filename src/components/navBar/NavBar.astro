---
import "./NavBarStyles.scss";
import NavBranding from "../common/navBranding/NavBranding.astro";
---

<script>
  const mobileMenuButton = document.getElementById("mobileMenuButton");
  const navBar = document.getElementById("navBar");

  if (mobileMenuButton && navBar) {
    mobileMenuButton.addEventListener("click", () => {
      // Add transitioning class before changing state
      navBar.classList.add("transitioning");

      const isVisible = navBar.getAttribute("data-visible") === "true";
      navBar.setAttribute("data-visible", (!isVisible).toString());
      mobileMenuButton.setAttribute("aria-expanded", (!isVisible).toString());
      mobileMenuButton.classList.toggle("active", !isVisible);

      // Remove transitioning class after animation completes
      setTimeout(() => {
        navBar.classList.remove("transitioning");
      }, 300);
    });

    // Close navBar if clicking anywhere except mobileMenuButton
    document.addEventListener("click", (event) => {
      if (
        navBar.getAttribute("data-visible") === "true" &&
        event.target !== mobileMenuButton &&
        !mobileMenuButton.contains(event.target as Node)
      ) {
        // Add transitioning class before changing state
        navBar.classList.add("transitioning");
        navBar.setAttribute("data-visible", "false");
        mobileMenuButton.setAttribute("aria-expanded", "false");
        mobileMenuButton.classList.remove("active");
        // Remove transitioning class after animation completes
        setTimeout(() => {
          navBar.classList.remove("transitioning");
        }, 300);
      }
    });
  }
</script>
<div id="navBrandingUnder">
  <NavBranding />
</div>
<div id="container">
  <button
    id="mobileMenuButton"
    aria-expanded="false"
    aria-controls="navBarLinkContainer"></button>
  <div id="navBar" data-visible="false">
    <div id="navBrandingOver">
      <NavBranding />
    </div>

    <nav id="navBarLinkContainer">
      <ul id="navBarLinkList">
        <li id="">
          <a href="/" id="navBarLink">Home</a>
        </li>
        <li>
          <a href="/our-people" id="navBarLink">Our People</a>
        </li>
        <li>
          <a href="/dev-blog" id="navBarLink">Dev Blog</a>
        </li>
        <li>
          <a href="/contact-us" id="navBarLink">Contact Us</a>
        </li>
      </ul>
    </nav>
  </div>
</div>
